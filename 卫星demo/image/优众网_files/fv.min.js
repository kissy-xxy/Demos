var Fv=function(i,t){var a={};a.version="0.1.4",a.support_type=["min","max","confirmation","email","phone","zip","format","ajax"],a.regs={mail:/^([a-zA-Z0-9]+[_|\_|\-|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\-|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,4}$/i,jquery_mail:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,phone:/^1\d{10}$/,zip:/\d{6}$/},a.checker={email_phone:function(i,t){var e=t||a.regs.mail,n=t||a.regs.phone;return e.test(i)||n.test(i)},email:function(i,t){var e=t||a.regs.mail;return e.test(i)},phone:function(i,t){var e=t||a.regs.phone;return e.test(i)},zip:function(i,t){var e=t||a.regs.zip;return 6===i.length&&e.test(i)},min:function(i,t){return new Boolean(i&&i.length>=t).valueOf()},max:function(i,t){return new Boolean(i&&i.length<=t).valueOf()},confirmation:function(i,t){return i===t},format:function(i,t){return t.test(i)}};var e=function(i){for(var t,a=i.split(";"),e=[],n=0;n<a.length;n++){t=a[n].split(",");for(var u={},s=0;s<t.length;s++){var r=t[s].split(":");u[r[0]]=r[1]}e.push(u)}return e},n=function(n,u,s,r){var F=this;this.dom=n,this.success=u,this.fail=s,this.finish_callback=r,this.$dom=t(n),this.valid_string=this.$dom.attr("validate"),this.rules=e(this.valid_string),this.reset_rules=function(){t.each(this.rules,function(i,t){delete t.valid})},this.valid=function(){var i=!0;return t.each(this.rules,function(t,a){i=i&&a.hasOwnProperty("valid")&&a.valid}),i},this.finished=function(){var i=!0;return t.each(this.rules,function(t,a){i=i&&a.hasOwnProperty("valid")}),i};var l=function(i,t,a){a.valid=i,F.callback(a)};this.validate=function(){var e,u=t.trim(F.$dom.val()),s=!0;F.reset_rules(),t.each(F.rules,function(r,F){var c,h=a.checker[F.type];switch(F.type){case"email":case"phone":case"format":case"zip":c=F.reg;break;case"min":case"max":c=parseInt(F.length);break;case"confirmation":var o=t("#"+F.target);c=t.trim(o.val());break;case"ajax":h=i[F.validator]}if(s&&h){if(e=F,"ajax"===F.type)return void h(n,F,l);F.valid=h(u,c),s=s&&F.valid}}),"ajax"!==e.type&&F.callback(e)},this.callback=function(i){var t=this.valid(),a=t?"success_msg":"fail_msg";this.success&&this.fail&&(t?this.success(this.dom,i.type,i[a]):this.fail(this.dom,i.type,i[a])),this.finish_callback&&this.finished()&&this.finish_callback(t,n)},this.bind_event=function(){var i=this.$dom.attr("validate_event");this.valid_event=i||"blur",this.$dom.bind(this.valid_event,this.validate)}};a.FieldValidater=n;var u=function(i,a,e,u){if("FORM"===i.tagName){this.dom=i,this.$form=t(i),this.success=a,this.fail=e,this.callback=u,this.$fields=this.$form.find("input[type=text], input[type=password], input[type=number], input[type=tel], select"),this.validaters=[];var s=this;this.init=function(){this.$fields.each(function(i,u){if(t(u).attr("validate")){var r=new n(u,a,e,s.form_callback);s.validaters.push(r)}})},this.validate=function(){t.each(this.validaters,function(i,t){t.validate()})},this.valid=function(){var i=!0;return t.each(this.validaters,function(t,a){i=i&&a.valid()}),i},this.finished=function(){var i=!0;return t.each(this.validaters,function(t,a){i=i&&a.finished()}),i},this.form_callback=function(){s.finished()&&s.callback&&s.callback(s.valid())},this.event_init=function(){t.each(this.validaters,function(i,t){t.bind_event()})}}};return a.FormValidater=u,a.check=function(i,e,n,u,s,r){var F=t(i),l=a.checker[e],c=(F.val(),l(s,r));return c?n&&n(i):u&&u(i),c},a.validate_field=function(i,t,a,e){var u=new n(i,t,a,e);u.validate(),u=null},a.validate_submit=function(i,t,a,e){var n=new u(i,t,a,e);n.init(),n.validate(),n=null},a.validate_init=function(i,t,a,e){var n=new u(i,t,a,e);n.init(),n.event_init()},t.fn.validate_field=function(i,t,e){a.validate_field(this[0],i,t,e)},t.fn.validate_init=function(i,t,e){a.validate_init(this[0],i,t,e)},t.fn.validate_submit=function(i,t,e){a.validate_submit(this[0],i,t,e)},a}(window,window.jQuery||window.Zepto);